---
import ArchivePanel from "@components/ArchivePanel.svelte";
import I18nKey from "@i18n/i18nKey";
import { i18n } from "@i18n/translation";
import MainGridLayout from "@layouts/MainGridLayout.astro";
import { getSortedPosts } from "../utils/content-utils";

const sortedPosts = await getSortedPosts();

// Get query parameters from URL
const url = Astro.url;
const tags = url.searchParams.getAll("tag");
const categories = url.searchParams.getAll("category");
const uncategorized = url.searchParams.get("uncategorized");
---

<MainGridLayout title={i18n(I18nKey.archive)}>
    <ArchivePanel 
        sortedPosts={sortedPosts} 
        tags={tags}
        categories={categories}
        uncategorized={uncategorized}
        client:only="svelte">
    </ArchivePanel>
</MainGridLayout>

